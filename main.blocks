<xml xmlns="https://developers.google.com/blockly/xml"><variables><variable type="KIND_SpriteKind" id="h^P^vcOEA]EH+`bDseUl">gemsPlayer</variable><variable type="KIND_SpriteKind" id="H1)Ot#oK}}RjiDFY$0Q`">gemsCatcher</variable><variable type="KIND_SpriteKind" id="B,gGzYU6pRP?UrHak1dh">gems</variable><variable type="KIND_SpriteKind" id="^g5o[IVJK82mZq5RlEME">getGemsKind</variable><variable type="KIND_SpriteKind" id="30J}fwYXDM8mSJaUdYMr">gemsKind</variable><variable type="KIND_SpriteKind" id="-6+nZcdb?NleF6$.ruHF">iceMagic</variable><variable type="KIND_SpriteKind" id="i]?WCJUIgS]X@,`#d}25">fireMagic</variable></variables><block type="pxt-on-start" id="(A8:5-45LvJ`zgW@xxNc" x="0" y="0"><statement name="HANDLER"><block type="typescript_statement" id="rC=D4j%~m_PYB87NtO;," editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="namespace getgems {" line1="" line2="//角色碰到障碍物回退" line3="function goBack(){" line4=" if (heroDirection == 3) {" line5="        heroCol += -1" line6="    } else if (heroDirection == 0) {" line7="        heroRow += -1" line8="    } else if (heroDirection == 1) {" line9="        heroCol += 1" line10="    } else if (heroDirection == 2) {" line11="        heroRow += 1" line12="    }" line13="    scene.cameraShake(4, 500)" line14="    tiles.placeOnTile(gemsHero, tiles.getTileLocation(heroCol, heroRow))" line15="}" line16="//碰到墙回退" line17="scene.onOverlapTile(SpriteKind.gemsPlayer, sprites.builtin.forestTiles0, function (sprite, location) {" line18="   pause(500) " line19="   goBack()" line20="" line21="})" line22="//碰到熔岩" line23="scene.onOverlapTile(SpriteKind.gemsPlayer, img`" line24="    5 4 4 5 5 4 4 4 4 2 2 2 4 4 4 4" line25="    4 4 4 4 4 5 5 4 2 2 2 2 4 4 4 5" line26="    4 2 2 2 4 4 5 4 2 2 4 4 5 5 5 5" line27="    2 2 4 2 4 4 5 4 2 2 4 5 5 5 5 4" line28="    2 2 2 2 4 4 5 4 2 2 4 4 5 5 4 4" line29="    4 2 2 2 4 5 5 4 4 4 4 4 4 4 4 2" line30="    2 2 2 4 4 5 5 5 4 4 2 2 2 2 2 2" line31="    4 2 2 4 5 5 5 5 4 2 2 4 2 2 2 4" line32="    5 4 4 4 4 4 4 5 5 4 2 2 2 4 4 4" line33="    4 4 4 2 2 2 4 4 5 5 4 4 4 4 5 5" line34="    4 2 2 2 2 2 2 2 4 5 5 5 5 5 5 5" line35="    5 4 4 2 4 2 2 4 4 5 5 5 4 4 4 5" line36="    5 5 4 2 2 2 4 4 4 5 5 4 2 2 2 4" line37="    4 5 4 4 4 4 5 5 5 5 4 2 4 2 2 4" line38="    4 5 5 5 5 5 5 4 4 4 2 4 2 4 2 4" line39="    4 5 5 5 4 4 4 4 2 2 2 2 4 2 4 4" line40="`, function(sprite: Sprite, location: tiles.Location) {" line41="    goBack()" line42="    gemsHero.say(&quot;there is lava ahead,I can not go!&quot;)" line43="" line44="})" line45="//碰到毒草" line46="scene.onOverlapTile(SpriteKind.gemsPlayer, img`" line47="    . . . . . . c c . . . . . c c ." line48="    . . . c c . c 3 c . c c . c 3 c" line49="    . . c 3 6 c 3 3 c . c 3 c 6 3 c" line50="    . . c 3 3 3 3 6 c . c 3 6 3 3 c" line51="    . . . c 6 3 6 6 c c c 3 3 3 c ." line52="    . . . . c c 6 6 c 6 c 6 3 3 c ." line53="    . . . . c 3 c 6 c 3 3 c 6 6 c ." line54="    c c . c 3 3 c c c c 3 3 c 6 c ." line55="    c 3 c c 3 6 6 c 3 c 3 6 c 6 c ." line56="    c 3 3 6 3 6 3 6 3 3 3 c c c c c" line57="    . c 3 3 3 c 3 3 6 3 6 c c 3 3 c" line58="    . . c 3 3 c c 3 3 3 6 c 3 3 6 ." line59="    c c c 6 3 6 c c 6 3 6 6 3 6 c c" line60="    c 3 3 3 3 3 c c c 3 6 3 3 3 3 c" line61="    . c c 6 6 3 6 6 c 6 3 3 6 c c ." line62="    . . . c 6 3 3 6 6 6 6 3 c . . ." line63="`, function(sprite: Sprite, location: tiles.Location) {" line64="    goBack()" line65="    gemsHero.say(&quot;There is poison plant,I can not go!&quot;)" line66="" line67="})" line68="" line69="//获得宝石事件" line70="sprites.onOverlap(SpriteKind.gemsCatcher, SpriteKind.gems, function(sprite: Sprite, otherSprite: Sprite) {" line71="    otherSprite.destroy()" line72="    info.player1.changeScoreBy(-1)" line73="})" line74="sprites.onOverlap(SpriteKind.getGemsKind, SpriteKind.gemsKind, function(sprite: Sprite, otherSprite: Sprite) {" line75="    otherSprite.destroy()" line76="    info.player1.changeScoreBy(-1)" line77="    gemsNum-=1" line78="})" line79="" line80="//关卡设定" line81="function levelset(level:number){" line82="   switch(level){" line83="&#9;&#9;&#9;&#9;case 1:" line84="                     tiles.setTilemap(tiles.createTilemap(hex`0a0008000202020202020202020202020202020202020202020202020202020202020202020102020202020202020203020202020202020202020202020202020202020202020202020202020202020202020202`, img`" line85="                         . . . . . . . . . ." line86="                         . . . . . . . . . ." line87="                         . . . . . . . . . ." line88="                         . . . . . . . . . ." line89="                         . . . . . . . . . ." line90="                         . . . . . . . . . ." line91="                         . . . . . . . . . ." line92="                         . . . . . . . . . ." line93="                     `, [myTiles.transparency16,sprites.dungeon.buttonTealDepressed,sprites.builtin.forestTiles0,sprites.dungeon.collectibleInsignia], TileScale.Sixteen))   " line94="&#9;&#9;&#9;&#9;&#9;break;" line95="&#9;&#9;&#9;&#9;case 2:" line96="                    tiles.setTilemap(tiles.createTilemap(hex`0a0008000101010101010101010101010101010101010101010101000003000001010101010000010002010101010101010100010101010101010000000101010101010101010101010101010101010101010101`, img`" line97="                        . . . . . . . . . ." line98="                        . . . . . . . . . ." line99="                        . . . . . . . . . ." line100="                        . . . . . . . . . ." line101="                        . . . . . . . . . ." line102="                        . . . . . . . . . ." line103="                        . . . . . . . . . ." line104="                        . . . . . . . . . ." line105="                    `, [myTiles.transparency16,sprites.builtin.forestTiles0,sprites.dungeon.collectibleInsignia,sprites.dungeon.buttonTealDepressed], TileScale.Sixteen))" line106="                    break;" line107="&#9;&#9;&#9;&#9;case 3:" line108="                    tiles.setTilemap(tiles.createTilemap(hex`0a0008000301010101010201010100010101010100010101000101010101000101010001010101010001010100010101010100010101000101010101000101010200000000000201010101010101010101010101`, img`" line109="                        . . . . . . . . . ." line110="                        . . . . . . . . . ." line111="                        . . . . . . . . . ." line112="                        . . . . . . . . . ." line113="                        . . . . . . . . . ." line114="                        . . . . . . . . . ." line115="                        . . . . . . . . . ." line116="                        . . . . . . . . . ." line117="                    `, [myTiles.transparency16,sprites.builtin.forestTiles0,sprites.dungeon.collectibleInsignia,sprites.dungeon.buttonTealDepressed], TileScale.Sixteen))" line118="                    break;" line119="                case 4:" line120="                    tiles.setTilemap(tiles.createTilemap(hex`0a0008000101010101010101010101010101010101010101010101000004020101010101010000010101010101020500000101010101010101000003010101010101010101010101010101010101010101010101`, img`" line121="                        . . . . . . . . . ." line122="                        . . . . . . . . . ." line123="                        . . . . . . . . . ." line124="                        . . . . . . . . . ." line125="                        . . . . . . . . . ." line126="                        . . . . . . . . . ." line127="                        . . . . . . . . . ." line128="                        . . . . . . . . . ." line129="                    `, [myTiles.transparency16,sprites.builtin.forestTiles0,sprites.dungeon.collectibleInsignia,sprites.dungeon.buttonTealDepressed,sprites.dungeon.hazardLava1,sprites.builtin.coral0], TileScale.Sixteen))" line130="                    break;" line131="                    " line132="&#9;&#9;&#9;}    " line133="}" line134="" line135="" line136="//变量声明" line137="let gem: Sprite = null" line138="let gemsHero: Sprite = null" line139="let heroDirection = 0" line140="let gemsNum = 0 " line141="let level = 1" line142="let heroRow = 0" line143="let heroCol = 0" line144="heroDirection = 0" line145="export enum turnDirection{" line146="    left," line147="    right" line148="    }" line149="export enum magicKind{" line150="    fire ," line151="    ice" line152="}" line153="interface IspriteLocation{" line154="    row:number," line155="    col:number" line156="}" line157="let frontOfHero:IspriteLocation ={" line158="    //行" line159="    row:0," line160="    //列" line161="    col:0" line162="}" line163="let heroLocation:IspriteLocation ={" line164="    //行" line165="    row:0," line166="    //列" line167="    col:0" line168="}" line169="" line170="//获取角色前方" line171="function getTheFrontOfHero():any{" line172="let addRow = 0" line173="let addCol = 0" line174=" if (heroDirection == 3) {" line175="        addCol += 1" line176="    } else if (heroDirection == 0) {" line177="        addRow += 1" line178="    } else if (heroDirection == 1) {" line179="        addCol += -1" line180="    } else if (heroDirection == 2) {" line181="        addRow += -1" line182="    }" line183="frontOfHero.row = heroRow+addRow" line184="frontOfHero.col = heroCol+addCol" line185="return frontOfHero" line186="}" line187="//获取角色横列位置" line188="function getHeroLoc():any{" line189="    heroLocation.row = gemsHero.y/16-0.5" line190="    heroLocation.col = gemsHero.x/16-0.5" line191="    return heroLocation" line192="}" line193="" line194="//初始化" line195="//%block" line196="//%group=&quot;Operate&quot;" line197="export function initGame(){ " line198="    gemsHero = sprites.create(img`" line199="    . . . . . . f f f f . . . . . ." line200="    . . . . f f f 2 2 f f f . . . ." line201="    . . . f f f 2 2 2 2 f f f . . ." line202="    . . f f f e e e e e e f f f . ." line203="    . . f f e 2 2 2 2 2 2 e e f . ." line204="    . . f e 2 f f f f f f 2 e f . ." line205="    . . f f f f e e e e f f f f . ." line206="    . f f e f b f 4 4 f b f e f f ." line207="    . f e e 4 1 f d d f 1 4 e e f ." line208="    . . f e e d d d d d d e e f . ." line209="    . . . f e e 4 4 4 4 e e f . . ." line210="    . . e 4 f 2 2 2 2 2 2 f 4 e . ." line211="    . . 4 d f 2 2 2 2 2 2 f d 4 . ." line212="    . . 4 4 f 4 4 5 5 4 4 f 4 4 . ." line213="    . . . . . f f f f f f . . . . ." line214="    . . . . . f f . . f f . . . . ." line215="`, SpriteKind.gemsPlayer)" line216="    level = game.askForNumber(&quot;set level(1-6)&quot;)" line217="    levelset(level)" line218="    tiles.placeOnRandomTile(gemsHero, img`" line219="        b b b b b b b b b b b b b b b b" line220="        b c b b b b b b b b b b b b c b" line221="        b b b c 6 6 6 6 6 6 6 6 c b b b" line222="        b b c 6 6 6 6 6 6 6 6 6 6 c b b" line223="        b b 6 6 6 6 6 6 6 6 6 6 6 6 b b" line224="        b b 6 6 6 6 6 6 6 6 6 6 6 6 b b" line225="        b b 6 6 6 6 6 6 6 6 6 6 6 6 b b" line226="        b b 6 6 6 6 6 6 6 6 6 6 6 6 b b" line227="        b b 6 6 6 6 6 6 6 6 6 6 6 6 b b" line228="        b b 9 6 6 6 6 6 6 6 6 6 6 9 b b" line229="        b b 9 6 6 6 6 6 6 6 6 6 6 9 b b" line230="        b b 6 9 6 6 6 6 6 6 6 6 9 6 b b" line231="        b b c 6 9 9 9 9 9 9 9 9 6 c b b" line232="        b b b c c c c c c c c c c b b b" line233="        b c b b b b b b b b b b b b c b" line234="        b b b b b b b b b b b b b b b b" line235="    `)" line236="    pause(500)" line237="    for (let 值 of tiles.getTilesByType(sprites.dungeon.collectibleInsignia)) {" line238="        gem = sprites.create(img`" line239="            . . . . . . . . . . . . . . . ." line240="            . . . . . . 4 4 4 4 . . . . . ." line241="            . . . . 4 4 4 5 5 4 4 4 . . . ." line242="            . . . 3 3 3 3 4 4 4 4 4 4 . . ." line243="            . . 4 3 3 3 3 2 2 2 1 1 4 4 . ." line244="            . . 3 3 3 3 3 2 2 2 1 1 5 4 . ." line245="            . 4 3 3 3 3 2 2 2 2 2 5 5 4 4 ." line246="            . 4 3 3 3 2 2 2 4 4 4 4 5 4 4 ." line247="            . 4 4 3 3 2 2 4 4 4 4 4 4 4 4 ." line248="            . 4 2 3 3 2 2 4 4 4 4 4 4 4 4 ." line249="            . . 4 2 3 3 2 4 4 4 4 4 2 4 . ." line250="            . . 4 2 2 3 2 2 4 4 4 2 4 4 . ." line251="            . . . 4 2 2 2 2 2 2 2 2 4 . . ." line252="            . . . . 4 4 2 2 2 2 4 4 . . . ." line253="            . . . . . . 4 4 4 4 . . . . . ." line254="            . . . . . . . . . . . . . . . ." line255="        `, SpriteKind.gemsKind)" line256="        tiles.placeOnTile(gem, 值)" line257="        gemsNum+=1" line258="        info.player1.setScore(gemsNum)" line259="    }" line260="    gemsHero.z = 1000" line261="    heroRow = gemsHero.y/16-0.5" line262="    heroCol = gemsHero.x/16-0.5" line263="    gemsHero.say(&quot;改程序前，先画流程图&quot;)" line264="}" line265="" line266="//获得宝石" line267="//%block" line268="//%group=&quot;Operate&quot;" line269="export function takeGems(){" line270="    gemsHero.setKind(SpriteKind.getGemsKind)" line271="    pause(100)" line272="    music.baDing.play()" line273="    gemsHero.setFlag(SpriteFlag.Ghost, true)" line274="    gemsHero.y-=5" line275="    pause(100)" line276="    gemsHero.setKind(SpriteKind.gemsPlayer)" line277="    gemsHero.setFlag(SpriteFlag.Ghost, false)" line278="    gemsHero.y+=5" line279="    if(gemsNum==0){" line280="        game.over(true)" line281="    }" line282="}" line283="" line284="" line285="//施法" line286="function actionOfMagic(isIceMagic:boolean){" line287="    if(isIceMagic){" line288="        let magicCube = sprites.create(img`" line289="            . . . . . . . . . . . . . . . ." line290="            . . . . . . . . . . . . . . . ." line291="            . . . . . . . . . . . . . . . ." line292="            . . . . . . . . . . . . . . . ." line293="            . . . . . . . . . . . . . . . ." line294="            . . . . 8 8 8 8 8 8 8 . . . . ." line295="            . . . . 8 1 1 1 1 1 8 . . . . ." line296="            . . . . 8 1 1 1 1 1 8 . . . . ." line297="            . . . . 8 1 1 9 1 1 8 . . . . ." line298="            . . . . 8 1 1 1 1 1 8 . . . . ." line299="            . . . . 8 1 1 1 1 1 8 . . . . ." line300="            . . . . 8 8 8 8 8 8 8 . . . . ." line301="            . . . . . . . . . . . . . . . ." line302="            . . . . . . . . . . . . . . . ." line303="            . . . . . . . . . . . . . . . ." line304="            . . . . . . . . . . . . . . . ." line305="        `,SpriteKind.iceMagic)" line306="        tiles.placeOnTile(magicCube, tiles.getTileLocation(getTheFrontOfHero().col, getTheFrontOfHero().col))" line307="        pause(500)" line308="        magicCube.destroy(effects.coolRadial,500)" line309="    }" line310="    else{" line311="        let magicCube2 = sprites.create(img`" line312="            . . . . . . . . . . . . . . . ." line313="            . . . . . . . . . . . . . . . ." line314="            . . . . . . . . . . . . . . . ." line315="            . . . . . . . . . . . . . . . ." line316="            . . . . . . . . . . . . . . . ." line317="            . . . . 2 2 2 2 2 2 2 . . . . ." line318="            . . . . 2 5 5 5 5 5 2 . . . . ." line319="            . . . . 2 5 5 5 5 5 2 . . . . ." line320="            . . . . 2 5 5 4 5 5 2 . . . . ." line321="            . . . . 2 5 5 5 5 5 2 . . . . ." line322="            . . . . 2 5 5 5 5 5 2 . . . . ." line323="            . . . . 2 2 2 2 2 2 2 . . . . ." line324="            . . . . . . . . . . . . . . . ." line325="            . . . . . . . . . . . . . . . ." line326="            . . . . . . . . . . . . . . . ." line327="            . . . . . . . . . . . . . . . ." line328="        `,SpriteKind.iceMagic)" line329="        tiles.placeOnTile(magicCube2, tiles.getTileLocation(getTheFrontOfHero().col, getTheFrontOfHero().col))" line330="        pause(500)" line331="        magicCube2.destroy(effects.fire,500)" line332="    }" line333="}" line334="//使用魔法" line335="//%block=&quot;use %magicKind magic&quot;" line336="//%group=&quot;Operate&quot;" line337="export function useMagic(choice:magicKind){" line338="    switch(choice){" line339="        case magicKind.ice:" line340="        if(tiles.tileAtLocationEquals(tiles.getTileLocation(getTheFrontOfHero().col, getTheFrontOfHero().col), img`" line341="            5 4 4 5 5 4 4 4 4 2 2 2 4 4 4 4" line342="            4 4 4 4 4 5 5 4 2 2 2 2 4 4 4 5" line343="            4 2 2 2 4 4 5 4 2 2 4 4 5 5 5 5" line344="            2 2 4 2 4 4 5 4 2 2 4 5 5 5 5 4" line345="            2 2 2 2 4 4 5 4 2 2 4 4 5 5 4 4" line346="            4 2 2 2 4 5 5 4 4 4 4 4 4 4 4 2" line347="            2 2 2 4 4 5 5 5 4 4 2 2 2 2 2 2" line348="            4 2 2 4 5 5 5 5 4 2 2 4 2 2 2 4" line349="            5 4 4 4 4 4 4 5 5 4 2 2 2 4 4 4" line350="            4 4 4 2 2 2 4 4 5 5 4 4 4 4 5 5" line351="            4 2 2 2 2 2 2 2 4 5 5 5 5 5 5 5" line352="            5 4 4 2 4 2 2 4 4 5 5 5 4 4 4 5" line353="            5 5 4 2 2 2 4 4 4 5 5 4 2 2 2 4" line354="            4 5 4 4 4 4 5 5 5 5 4 2 4 2 2 4" line355="            4 5 5 5 5 5 5 4 4 4 2 4 2 4 2 4" line356="            4 5 5 5 4 4 4 4 2 2 2 2 4 2 4 4" line357="        `)){    " line358="            actionOfMagic(true)" line359="        }" line360="        else{" line361="            gemsHero.say(&quot;There is not hot lava need to be frozen!&quot;)" line362="        }" line363="        break" line364="        default:" line365="        if(tiles.tileAtLocationEquals(tiles.getTileLocation(getTheFrontOfHero().col, getTheFrontOfHero().col), img`" line366="            . . . . . . c c . . . . . c c ." line367="            . . . c c . c 3 c . c c . c 3 c" line368="            . . c 3 6 c 3 3 c . c 3 c 6 3 c" line369="            . . c 3 3 3 3 6 c . c 3 6 3 3 c" line370="            . . . c 6 3 6 6 c c c 3 3 3 c ." line371="            . . . . c c 6 6 c 6 c 6 3 3 c ." line372="            . . . . c 3 c 6 c 3 3 c 6 6 c ." line373="            c c . c 3 3 c c c c 3 3 c 6 c ." line374="            c 3 c c 3 6 6 c 3 c 3 6 c 6 c ." line375="            c 3 3 6 3 6 3 6 3 3 3 c c c c c" line376="            . c 3 3 3 c 3 3 6 3 6 c c 3 3 c" line377="            . . c 3 3 c c 3 3 3 6 c 3 3 6 ." line378="            c c c 6 3 6 c c 6 3 6 6 3 6 c c" line379="            c 3 3 3 3 3 c c c 3 6 3 3 3 3 c" line380="            . c c 6 6 3 6 6 c 6 3 3 6 c c ." line381="            . . . c 6 3 3 6 6 6 6 3 c . . ." line382="        `)){    " line383="            actionOfMagic(false)" line384="        }" line385="        break" line386="    }" line387="}" line388="" line389="    //转向" line390="    //%block=&quot;turn %turnDirection&quot;" line391="    //%group=&quot;Move&quot;" line392="    export function turn (choice: turnDirection) {" line393="    switch(choice){" line394="        case turnDirection.right:" line395="        heroDirection += 1" line396="        heroDirection = heroDirection % 4" line397="        break" line398="        default :" line399="        heroDirection += 3" line400="        heroDirection = heroDirection % 4" line401="        break" line402="    }" line403="    if (heroDirection == 3) {//向右" line404="        gemsHero.setImage(img`" line405="            . . . . . . f f f f f f . . . ." line406="            . . . . f f e e e e f 2 f . . ." line407="            . . . f f e e e e f 2 2 2 f . ." line408="            . . . f e e e f f e e e e f . ." line409="            . . . f f f f e e 2 2 2 2 e f ." line410="            . . . f e 2 2 2 f f f f e 2 f ." line411="            . . f f f f f f f e e e f f f ." line412="            . . f f e 4 4 e b f 4 4 e e f ." line413="            . . f e e 4 d 4 1 f d d e f . ." line414="            . . . f e e e 4 d d d d f . . ." line415="            . . . . f f e e 4 4 4 e f . . ." line416="            . . . . . 4 d d e 2 2 2 f . . ." line417="            . . . . . e d d e 2 2 2 f . . ." line418="            . . . . . f e e f 4 5 5 f . . ." line419="            . . . . . . f f f f f f . . . ." line420="            . . . . . . . f f f . . . . . ." line421="        `)" line422="    } else if (heroDirection == 0) {//向下" line423="        gemsHero.setImage(img`" line424="            . . . . . . f f f f . . . . . ." line425="            . . . . f f f 2 2 f f f . . . ." line426="            . . . f f f 2 2 2 2 f f f . . ." line427="            . . f f f e e e e e e f f f . ." line428="            . . f f e 2 2 2 2 2 2 e e f . ." line429="            . . f e 2 f f f f f f 2 e f . ." line430="            . . f f f f e e e e f f f f . ." line431="            . f f e f b f 4 4 f b f e f f ." line432="            . f e e 4 1 f d d f 1 4 e e f ." line433="            . . f e e d d d d d d e e f . ." line434="            . . . f e e 4 4 4 4 e e f . . ." line435="            . . e 4 f 2 2 2 2 2 2 f 4 e . ." line436="            . . 4 d f 2 2 2 2 2 2 f d 4 . ." line437="            . . 4 4 f 4 4 5 5 4 4 f 4 4 . ." line438="            . . . . . f f f f f f . . . . ." line439="            . . . . . f f . . f f . . . . ." line440="        `)" line441="    } else if (heroDirection == 1) {//向左" line442="        gemsHero.setImage(img`" line443="            . . . . f f f f f f . . . . . ." line444="            . . . f 2 f e e e e f f . . . ." line445="            . . f 2 2 2 f e e e e f f . . ." line446="            . . f e e e e f f e e e f . . ." line447="            . f e 2 2 2 2 e e f f f f . . ." line448="            . f 2 e f f f f 2 2 2 e f . . ." line449="            . f f f e e e f f f f f f f . ." line450="            . f e e 4 4 f b e 4 4 e f f . ." line451="            . . f e d d f 1 4 d 4 e e f . ." line452="            . . . f d d d d 4 e e e f . . ." line453="            . . . f e 4 4 4 e e f f . . . ." line454="            . . . f 2 2 2 e d d 4 . . . . ." line455="            . . . f 2 2 2 e d d e . . . . ." line456="            . . . f 5 5 4 f e e f . . . . ." line457="            . . . . f f f f f f . . . . . ." line458="            . . . . . . f f f . . . . . . ." line459="        `)" line460="    } else if (heroDirection == 2) {//向上" line461="        gemsHero.setImage(img`" line462="            . . . . . . f f f f . . . . . ." line463="            . . . . f f e e e e f f . . . ." line464="            . . . f e e e f f e e e f . . ." line465="            . . f f f f f 2 2 f f f f f . ." line466="            . . f f e 2 e 2 2 e 2 e f f . ." line467="            . . f e 2 f 2 f f 2 f 2 e f . ." line468="            . . f f f 2 2 e e 2 2 f f f . ." line469="            . f f e f 2 f e e f 2 f e f f ." line470="            . f e e f f e e e e f e e e f ." line471="            . . f e e e e e e e e e e f . ." line472="            . . . f e e e e e e e e f . . ." line473="            . . e 4 f f f f f f f f 4 e . ." line474="            . . 4 d f 2 2 2 2 2 2 f d 4 . ." line475="            . . 4 4 f 4 4 4 4 4 4 f 4 4 . ." line476="            . . . . . f f f f f f . . . . ." line477="            . . . . . f f . . f f . . . . ." line478="        `)" line479="    }" line480="    pause(500)" line481="}" line482="    //前进" line483="    //%block" line484="    //%group=&quot;Move&quot;" line485="    export function stepForward () {" line486="    if (heroDirection == 3) {" line487="        heroCol += 1" line488="    } else if (heroDirection == 0) {" line489="        heroRow += 1" line490="    } else if (heroDirection == 1) {" line491="        heroCol += -1" line492="    } else if (heroDirection == 2) {" line493="        heroRow += -1" line494="    }" line495="    tiles.placeOnTile(gemsHero, tiles.getTileLocation(heroCol, heroRow))" line496="    pause(500)" line497="}" line498="" line499="" line500="}" numlines="501"></mutation><next><block type="getgems_initGame" id="iDCKvG?Aknv@BLvM,Wlh"/></next></block></statement></block><block type="keyonevent" id="lf$z|~:{|l9LiO7Ant{1" x="20" y="16700"><field name="button">controller.A</field><field name="event">ControllerButtonEvent.Pressed</field><statement name="HANDLER"><block type="getgems_stepForward" id="][usN!8d={:rav11!P]c"/></statement></block><block type="keyonevent" id=":qd5_*l:_Oi.~CNpBf$C" x="260" y="16700"><field name="button">controller.B</field><field name="event">ControllerButtonEvent.Pressed</field><statement name="HANDLER"><block type="getgems_turn" id="t9kXq`76~^qMgfCu7~%G"><field name="turnDirection">getgems.turnDirection.left</field></block></statement></block><block type="keyonevent" id="GfmJ$fe:;UVFS}*CSK-j" x="210" y="20230"><field name="button">controller.menu</field><field name="event">ControllerButtonEvent.Pressed</field><statement name="HANDLER"><block type="getgems_useMagic" id=",.(SG#x{X;2ZNMohvLiH"><field name="magicKind">getgems.magicKind.fire</field></block></statement></block></xml>